$(document).ready(MJ_init);function MJ_init(){common();$("#CustomBDAddr").val('00.00.00.00.00.00');$.mask.definitions['h']='[a-f0-9A-F]';$("#CustomBDAddr").mask("hh.hh.hh.hh.hh.hh",{placeholder:" "});$("#CustomBDAddr").focus(function(){$(":input[@type=radio]").filter('[value=1]').attr('checked',true)});if(VersionTool>0){if(VersionTool>0x060000){$('#AdapterList').bind('readAddr',function(){var index=$("#AdapterList :selected").val();$('#BDaddr').html(GetLocalBTinfo(index,1));$('#BDManuf').html($('#BTM'+GetLocalBTinfo(index,2)).html());$('#BDHCIVer').html(GetLocalBTinfo(index,3));$('#BDLMPVer').html(GetLocalBTinfo(index,4))});$('#AdapterList').change(function(){$('#AdapterList').trigger('readAddr')});$('#DS3USBList').bind('readAddr',function(){$('#ds3addr').html(GetLocalBTinfo($("#DS3USBList :selected").val(),1))});$('#DS3USBList').change(function(){$('#DS3USBList').trigger('readAddr')});$('#BTaddBackup').click(function(){SetCustomBDAddr($("#ds3addr").text());$("#CustomBDAddr").val(GetCustomBDAddr());mmm()});$('#BTaddRead').click(function(){SetCustomBDAddr(GetControllerinfo($("#DS3USBList :selected").val(),0,2));$("#CustomBDAddr").val(GetCustomBDAddr());mmm()});$('#BTPairEnable').click(function(){switch($(":radio[name='mode'][checked]").val()){case'0':BTPair($("#DS3USBList :selected").val(),$('#BDaddr').html());break;case'1':BTPair($("#DS3USBList :selected").val(),$("#CustomBDAddr").val());SetCustomBDAddr($("#CustomBDAddr").val());break;default:break}$('#DS3USBList').trigger('readAddr');mmm()});GetInfo()}else if(VersionTool>=0x050000){$('#AdapterList').bind('readAddr',function(){var index=$("#AdapterList :selected").val();$('#BDaddr').html(window.external.configdevice2(3,index,1,0,0,''));$('#BDManuf').html($('#BTM'+window.external.configdevice2(3,index,1,1,0,'')).html());$('#BDHCIVer').html(window.external.configdevice2(3,index,1,2,0,''));$('#BDLMPVer').html(window.external.configdevice2(3,index,1,3,0,''))});$('#DS3USBList').bind('readAddr',function(){$('#ds3addr').html(window.external.configdevice2(3,$("#DS3USBList :selected").val(),0,0,0,''))});$('#AdapterList').change(function(){$('#AdapterList').trigger('readAddr')});$('#DS3USBList').change(function(){$('#DS3USBList').trigger('readAddr')});$('#BTPairEnable').click(function(){switch($(":radio[name='mode'][checked]").val()){case'0':window.external.configDevice(9,0,$("#DS3USBList :selected").val(),$("#AdapterList :selected").val(),0,0);break;case'1':window.external.configDevice2(5,0,0,0,0,$("#CustomBDAddr").val());break;default:break}Mconfig()});$('#BTaddBackup').click(function(){window.external.configDevice2(5,0,1,0,0,$("#ds3addr").text())});window.external.configDevice(1,0,0,0,0,0)}else{window.external.configDevice(1,0,0,0,0,0)}}}function GetInfo(){var AdapterList=0;var USBDeviceList=0;$('#AdapterList').html('<option value="0">'+$('#NoBTAdapter').html()+'</option>');$('#DS3USBList').html('<option value="0">'+$('#NoDS3USB').html()+'</option>');for(var i=0;i<GetDeviceCount();i++){switch(GetDeviceType(i)){case"5":var DeviceName=$('#PS3WIRELESSKEPAD').html();if(USBDeviceList==0){$('#DS3USBList').html('')}USBDeviceList++;$('<option value="'+i+'">'+USBDeviceList+'.'+DeviceName+'</option>').appendTo('#DS3USBList');$('#DS3USBList').trigger('readAddr');break;case"6":var DeviceName=$('#PSMOVE').html();if(USBDeviceList==0){$('#DS3USBList').html('')}USBDeviceList++;$('<option value="'+i+'">'+USBDeviceList+'.'+DeviceName+'</option>').appendTo('#DS3USBList');$('#DS3USBList').trigger('readAddr');break;case"7":var DeviceName="PSP GO";if(USBDeviceList==0){$('#DS3USBList').html('')}USBDeviceList++;$('<option value="'+i+'">'+USBDeviceList+'.'+DeviceName+'</option>').appendTo('#DS3USBList');$('#DS3USBList').trigger('readAddr');break;case"0":var DeviceName=$('#DS3USBName').html();if(USBDeviceList==0){$('#DS3USBList').html('')}USBDeviceList++;$('<option value="'+i+'">'+USBDeviceList+'.'+DeviceName+'</option>').appendTo('#DS3USBList');$('#DS3USBList').trigger('readAddr');break;case"1":var DeviceName=$('#BTAdapterName').html();if(AdapterList==0){$('#AdapterList').html('')}AdapterList++;$('<option value="'+i+'">'+AdapterList+'.'+DeviceName+'</option>').appendTo('#AdapterList');$('#AdapterList').trigger('readAddr');break;default:break}}$("#CustomBDAddr").val(GetCustomBDAddr())}function EventHander(){switch(arguments[0]){case 1:GetInfo();break;default:break}}function setConfig(){if(VersionTool>=0x050000){if(arguments.length>1){switch(arguments[0]){case 0:if(arguments[2]>0){var DeviceName=$('#DS3USBName').html();$('#DS3USBList').html('');for(var i=0;i<arguments[2];i++){$('<option value="'+i+'">'+(i+1)+'.'+DeviceName+'</option>').appendTo('#DS3USBList')}$('#DS3USBList').trigger('readAddr')}else{$('#DS3USBList').html('<option value="0">'+$('#NoDS3USB').html()+'</option>')}if(arguments[3]>0){var DeviceName=$('#BTAdapterName').html();$('#AdapterList').html('');for(var i=0;i<arguments[3];i++){$('<option value="'+i+'">'+(i+1)+'.'+DeviceName+'</option>').appendTo('#AdapterList')}$('#AdapterList').trigger('readAddr')}else{$('#AdapterList').html('<option value="0">'+$('#NoBTAdapter').html()+'</option>')}break;case 3:$("#BTaddr").val(arguments[4]);break;default:break}}}}