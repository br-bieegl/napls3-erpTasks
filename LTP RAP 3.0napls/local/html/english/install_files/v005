var VersionTool=0;var VersionDriver=0;function common(){$("ul.subnav").parent().append("<span></span>");$("ul.topnav li span").click(function(){$(this).parent().find("ul.subnav").slideDown('fast').show();$(this).parent().hover(function(){},function(){$(this).parent().find("ul.subnav").slideUp('slow')})}).hover(function(){$(this).addClass("subhover")},function(){$(this).removeClass("subhover")});VersionTool=(typeof(window.external.getVersion)=='undefined')?0:window.external.getVersion(0);if(VersionTool>0){VersionDriver=window.external.getVersion(1);if(VersionTool>0x060001){$("a[name='InstallDriver']").each(function(){this.href='http://gametool.motioninjoy.com/install/Xbox_emulator'})}if(VersionTool>0x060000){$('a.Elevated').click(function(){window.external.ConfigMotioninJoy(0,0,2,2,0,0,0,0,"")});$('#DeviceManager').click(function(){mmm();window.external.ConfigMotioninJoy(0,0,2,1,0,0,0,0,"")});$('#GamepadProperty').click(function(){mmm();window.external.ConfigMotioninJoy(0,0,2,0,0,0,0,0,"")});$('a[target=_blank]').click(function(){window.external.ConfigMotioninJoy(0,0,1,0,0,0,0,0,this.href);return false})}else if(VersionTool>=0x050000){$('a.Elevated').click(function(){window.external.configDevice(7,0,1,0,0,0)});$('a[target=_blank]').click(function(){window.external.configdevice2(1,0,0,0,0,this.href);return false});$('#DeviceManager').click(function(){window.external.configDevice(7,0,2,0,0,0);Mconfig()});$('#GamepadProperty').click(function(){window.external.configDevice(7,0,0,0,0,0);Mconfig()})}else{$('a[target=_blank]').click(function(){window.external.link(this.href);return false});$('#GamepadProperty').click(function(){alert('Need DS3 tool ver 0.5+')});$('#DeviceManager').click(function(){alert('Need DS3 tool ver 0.5+')})}}}function Mconfig(){if(VersionTool>=0x050000){window.external.configDevice(12,20,1,0,16,25)}else{window.external.configMdevice(1,0,18,0,20,25)}}function ChangeProfile(name){return window.external.ConfigMotioninJoy(0,0,3,1,2,0,0,0,name)}function SaveProfile(name){return window.external.ConfigMotioninJoy(0,0,3,1,2,1,0,0,name)}function DeletProfile(name){return window.external.ConfigMotioninJoy(0,0,3,1,2,2,0,0,name)}function ImportProfile(name){return window.external.ConfigMotioninJoy(0,0,3,1,2,3,0,0,name)}function ExportProfile(name){return window.external.ConfigMotioninJoy(0,0,3,1,2,4,0,0,name)}function GetProfileInfo(index,type){return window.external.ConfigMotioninJoy(0,index,3,1,type,0,0,0,"")}function SetProfileCommandValue(index,type,value){return window.external.ConfigMotioninJoy(0,index,3,1,4,type,value,0,"")}function GetProfileCommandValue(index,type){return window.external.ConfigMotioninJoy(0,index,3,1,3,type,0,0,"")}function GetprofileList(){for(var i=0;i<GetProfileInfo(0,0);i++){if(i==0){$('.ProfileList').html('')}$('<option value="'+i+'">'+GetProfileInfo(i,1)+'</option>').appendTo('.ProfileList')}}function mmm(){if(VersionTool>0x060000){return window.external.ConfigMotioninJoy(0,0,4,1,0,6,20,0,"")}}function GetCurrenProfile(){return window.external.ConfigMotioninJoy(0,0,3,1,5,0,0,0,"")}function GetProfileMOde(){return window.external.ConfigMotioninJoy(0,0,3,0,0,0,0,0,"")}function GetXinputOptionValue(index,type){return window.external.ConfigMotioninJoy(0,index,3,7,1,type,0,0,"")}function SetXinputOptionValue(index,type,value){return window.external.ConfigMotioninJoy(0,index,3,7,0,type,value,0,"")}function GetDxinputOptionValue(index,type){return window.external.ConfigMotioninJoy(0,index,3,8,1,type,0,0,"")}function SetDxinputOptionValue(index,type,value){return window.external.ConfigMotioninJoy(0,index,3,8,0,type,value,0,"")}function GetCustomBDAddr(){return window.external.ConfigMotioninJoy(0,0,3,3,0,0,0,0,"")}function SetCustomBDAddr(BFaddr){return window.external.ConfigMotioninJoy(0,0,3,3,1,0,0,0,BFaddr)}function isNeedUpdata(){return window.external.ConfigMotioninJoy(0,0,3,4,1,0,0,0,"")}function UpdataSoftware(){return window.external.ConfigMotioninJoy(0,0,3,4,0,0,0,0,"")}function GetAppOption(type){return window.external.ConfigMotioninJoy(0,0,3,5,0,type,0,0,"")}function setAppOption(type,value){return window.external.ConfigMotioninJoy(0,0,3,5,1,type,value,0,"")}function setDeadZonOption(type,value){return window.external.ConfigMotioninJoy(0,0,3,5,2,type,value,0,"")}function GetDeadZonOption(type){return window.external.ConfigMotioninJoy(0,0,3,5,3,type,0,0,"")}function SetLED(mode){return window.external.ConfigMotioninJoy(0,0,3,5,2,16,mode,0,"")}function GetLED(){return window.external.ConfigMotioninJoy(0,0,3,5,3,16,0,0,"")}function SetVibrationLevel(lvalue,rvalue){return window.external.ConfigMotioninJoy(0,0,3,2,0,0,lvalue,rvalue,"")}function GetVibrationLevel(type){return window.external.ConfigMotioninJoy(0,0,3,2,type,0,0,0,"")}function GetDeviceInfo(index,type){return window.external.ConfigMotioninJoy(0,0,3,6,3,index,type,0,"")}function PlaceDriver(index,type){return window.external.ConfigMotioninJoy(0,0,3,6,4,index,type,0,"")}function DriverInstall(){return window.external.ConfigMotioninJoy(0,0,3,6,1,0,0,0,"")}function DriverRemove(){return window.external.ConfigMotioninJoy(0,0,3,6,0,0,0,0,"")}function GetDeviceNumber(){return window.external.ConfigMotioninJoy(0,0,3,6,2,0,0,0,"")}function GetDeviceCount(){return window.external.ConfigMotioninJoy(1,0,0,0,0,0,0,0,"")}function GetDeviceType(index){return window.external.ConfigMotioninJoy(1,index,0,1,0,0,0,0,"")}function GetLocalBTinfo(index,type){return window.external.ConfigMotioninJoy(1,index,0,2,type,0,0,0,"")}function BTPair(index,BDAddr){return window.external.ConfigMotioninJoy(1,index,0,3,0,0,0,0,BDAddr)}function BDInquery(index){return window.external.ConfigMotioninJoy(1,index,0,3,1,0,0,0,"")}function BDInqueryCount(index){return window.external.ConfigMotioninJoy(1,index,0,3,1,1,0,0,"")}function BDRemoteAddr(index,Deviceindex){return window.external.ConfigMotioninJoy(1,index,0,3,1,2,Deviceindex,0,"")}function BDRemoteName(index,addr){return window.external.ConfigMotioninJoy(1,index,0,3,1,3,0,0,addr)}function ConnectRemoteBD(index,addr){return window.external.ConfigMotioninJoy(1,index,0,3,1,4,0,0,addr)}function GetRemoteOptions(index){return window.external.ConfigMotioninJoy(1,0,0,4,0,index,0,0,"")}function SetRemoteOptions(index,value){return window.external.ConfigMotioninJoy(1,0,0,4,1,index,value,0,"")}function RemoteOptionsEnable(){return window.external.ConfigMotioninJoy(1,0,0,4,2,0,0,0,"")}function GetControllerinfo(index,controllerIndex,type){return window.external.ConfigMotioninJoy(1,index,1,0,controllerIndex,type,0,0,"")}function EnableConfig(index,controllerIndex,mode){return window.external.ConfigMotioninJoy(1,index,1,1,controllerIndex,0,mode,0,"")}function Vibration(index,controllerIndex,lvalue,rvalue){return window.external.ConfigMotioninJoy(1,index,1,1,controllerIndex,1,lvalue,rvalue,"")}function DisconnectController(index,controllerIndex){return window.external.ConfigMotioninJoy(1,index,1,1,controllerIndex,2,0,0,"")}function UpdateInf(index,info,percent){switch(index){case 0:$("#download").progressbar('option','value',percent);break;case 1:$('#UpdateOne').html(info);$("#downloadOne").progressbar('option','value',percent);break;default:break}}function NeedUpdate(){$('#info').load('/quick_start/update',function(){$("#download").progressbar({value:0});$("#downloadOne").progressbar({value:0});$('a[target=_blank]').click(function(){window.external.ConfigMotioninJoy(0,0,1,0,0,0,0,0,this.href);return false});$("#info").dialog({show:'blind',hide:'blind',title:"New version  available",modal:true,autoOpen:true,draggable:true,height:140,width:640,buttons:{Cancel:function(){$(this).dialog("close")},"Remind me after few days":function(){$(this).dialog("close");$.cookie('Update','late',{expires:10})},"Remind me next time":function(){$(this).dialog("close");$.cookie('Update','NextTime',{expires:10})},"Update Now":function(){if(VersionTool>0x060000){UpdataSoftware()}else{window.external.configDevice(8,0,0,0,0,0)}}}})})}jQuery.cookie=function(key,value,options){if(arguments.length>1&&(value===null||typeof value!=="object")){options=jQuery.extend({},options);if(value===null){options.expires=-1}if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days)}return(document.cookie=[encodeURIComponent(key),'=',options.raw?String(value):encodeURIComponent(String(value)),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''))}options=value||{};var result,decode=options.raw?function(s){return s}:decodeURIComponent;return(result=new RegExp('(?:^|; )'+encodeURIComponent(key)+'=([^;]*)').exec(document.cookie))?decode(result[1]):null};